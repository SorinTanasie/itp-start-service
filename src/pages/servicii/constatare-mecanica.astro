---
import Section2 from "@/components/features/Section2.astro";
import Testimonial from "@/components/homepage/Testimonial.astro";
import Base from "@/layouts/Base.astro";
import { markdownify } from "@/lib/utils/textConverter";
import { getEntry } from "astro:content";
import Compare from "@/layouts/components/pricing/Compare.astro";
import AboutCta from "@/components/about/AboutCta.astro";

const features = await getEntry("features", "-index");

const pricing = await getEntry("pricing", "-index");
const { compareConstatareMecanica } = pricing.data;

const about = await getEntry("about", "-index");
const { call_to_action: aboutCallToAction } = about.data;

const {
  title,
  meta_title,
  description,
  hero,
  section_constatare_mecanica,
} = features.data;
---

<Base title={title} meta_title={meta_title} description={description}>
  <section class="section pb-0" data-aos="fade-up-sm">
    <div class="container">
      <h1
        class="pb-4 max-xl:h2 text-center"
        data-aos="fade-up-sm"
        data-aos-delay="100"
        set:html={markdownify(hero.title)}
      />
      <p
        class="pb-8 text-balance text-center text-text/70"
        data-aos="fade-up-sm"
        data-aos-delay="200"
        set:html={markdownify(hero.content)}
      />
    </div>
  </section>

  <Section2 section_2={section_constatare_mecanica} />

  <section class="section">
    <Compare compare={compareConstatareMecanica} />
  </section>
  <Testimonial />
  <AboutCta call_to_action={aboutCallToAction} />
</Base>
